In file included from ../ext/bson.h:17:0,
                 from ../ext/bson.cc:35:
../ext/nan.h:403:10: error: ‘node::smalloc’ has not been declared
../ext/nan.h:403:10: error: expected ‘,’ or ‘...’ before ‘callback’
../ext/nan.h: In function ‘v8::Local<v8::Object> NanNewBufferHandle(char*, size_t, int)’:
../ext/nan.h:409:44: error: ‘callback’ was not declared in this scope
../ext/nan.h:409:54: error: ‘hint’ was not declared in this scope
../ext/nan.h: In function ‘v8::Local<v8::Object> NanBufferUse(char*, uint32_t)’:
../ext/nan.h:427:12: error: ‘Use’ is not a member of ‘node::Buffer’
In file included from ../ext/bson.cc:35:0:
../ext/bson.h: At global scope:
../ext/bson.h:57:16: error: ‘FunctionCallbackInfo’ in namespace ‘v8’ does not name a type
../ext/bson.h:57:16: error: ISO C++ forbids declaration of ‘parameter’ with no type [-fpermissive]
../ext/bson.h:57:16: error: expected ‘,’ or ‘...’ before ‘<’ token
../ext/bson.h:60:9: error: ‘FunctionCallbackInfo’ in namespace ‘v8’ does not name a type
../ext/bson.h:60:9: error: ISO C++ forbids declaration of ‘parameter’ with no type [-fpermissive]
../ext/bson.h:60:9: error: expected ‘,’ or ‘...’ before ‘<’ token
../ext/bson.h:61:9: error: ‘FunctionCallbackInfo’ in namespace ‘v8’ does not name a type
../ext/bson.h:61:9: error: ISO C++ forbids declaration of ‘parameter’ with no type [-fpermissive]
../ext/bson.h:61:9: error: expected ‘,’ or ‘...’ before ‘<’ token
../ext/bson.h:64:9: error: ‘FunctionCallbackInfo’ in namespace ‘v8’ does not name a type
../ext/bson.h:64:9: error: ISO C++ forbids declaration of ‘parameter’ with no type [-fpermissive]
../ext/bson.h:64:9: error: expected ‘,’ or ‘...’ before ‘<’ token
../ext/bson.h:65:9: error: ‘FunctionCallbackInfo’ in namespace ‘v8’ does not name a type
../ext/bson.h:65:9: error: ISO C++ forbids declaration of ‘parameter’ with no type [-fpermissive]
../ext/bson.h:65:9: error: expected ‘,’ or ‘...’ before ‘<’ token
../ext/bson.h:71:9: error: ‘FunctionCallbackInfo’ in namespace ‘v8’ does not name a type
../ext/bson.h:71:9: error: ISO C++ forbids declaration of ‘parameter’ with no type [-fpermissive]
../ext/bson.h:71:9: error: expected ‘,’ or ‘...’ before ‘<’ token
../ext/bson.cc: In static member function ‘static void BSON::Initialize(v8::Handle<v8::Object>)’:
../ext/bson.cc:643:55: error: invalid conversion from ‘void (*)(int)’ to ‘v8::InvocationCallback {aka v8::Handle<v8::Value> (*)(const v8::Arguments&)}’ [-fpermissive]
In file included from ../ext/bson.cc:14:0:
/home/rube/.node-gyp/0.11.2/deps/v8/include/v8.h:2957:34: error:   initializing argument 1 of ‘static v8::Local<v8::FunctionTemplate> v8::FunctionTemplate::New(v8::InvocationCallback, v8::Handle<v8::Value>, v8::Handle<v8::Signature>, int)’ [-fpermissive]
../ext/bson.cc:648:73: error: no matching function for call to ‘SetPrototypeMethod(v8::Local<v8::FunctionTemplate>&, const char [20], void (&)(int))’
../ext/bson.cc:648:73: note: candidate is:
In file included from ../ext/bson.cc:22:0:
/home/rube/.node-gyp/0.11.2/src/node.h:122:6: note: template<class target_t> void node::SetPrototypeMethod(target_t, const char*, v8::InvocationCallback)
/home/rube/.node-gyp/0.11.2/src/node.h:122:6: note:   template argument deduction/substitution failed:
../ext/bson.cc:648:73: note:   cannot convert ‘BSON::CalculateObjectSize’ (type ‘void(int)’) to type ‘v8::InvocationCallback {aka v8::Handle<v8::Value> (*)(const v8::Arguments&)}’
../ext/bson.cc:649:57: error: no matching function for call to ‘SetPrototypeMethod(v8::Local<v8::FunctionTemplate>&, const char [10], void (&)(int))’
../ext/bson.cc:649:57: note: candidate is:
In file included from ../ext/bson.cc:22:0:
/home/rube/.node-gyp/0.11.2/src/node.h:122:6: note: template<class target_t> void node::SetPrototypeMethod(target_t, const char*, v8::InvocationCallback)
/home/rube/.node-gyp/0.11.2/src/node.h:122:6: note:   template argument deduction/substitution failed:
../ext/bson.cc:649:57: note:   cannot convert ‘BSON::BSONSerialize’ (type ‘void(int)’) to type ‘v8::InvocationCallback {aka v8::Handle<v8::Value> (*)(const v8::Arguments&)}’
../ext/bson.cc:650:89: error: no matching function for call to ‘SetPrototypeMethod(v8::Local<v8::FunctionTemplate>&, const char [28], void (&)(int))’
../ext/bson.cc:650:89: note: candidate is:
In file included from ../ext/bson.cc:22:0:
/home/rube/.node-gyp/0.11.2/src/node.h:122:6: note: template<class target_t> void node::SetPrototypeMethod(target_t, const char*, v8::InvocationCallback)
/home/rube/.node-gyp/0.11.2/src/node.h:122:6: note:   template argument deduction/substitution failed:
../ext/bson.cc:650:89: note:   cannot convert ‘BSON::SerializeWithBufferAndIndex’ (type ‘void(int)’) to type ‘v8::InvocationCallback {aka v8::Handle<v8::Value> (*)(const v8::Arguments&)}’
../ext/bson.cc:651:61: error: no matching function for call to ‘SetPrototypeMethod(v8::Local<v8::FunctionTemplate>&, const char [12], void (&)(int))’
../ext/bson.cc:651:61: note: candidate is:
In file included from ../ext/bson.cc:22:0:
/home/rube/.node-gyp/0.11.2/src/node.h:122:6: note: template<class target_t> void node::SetPrototypeMethod(target_t, const char*, v8::InvocationCallback)
/home/rube/.node-gyp/0.11.2/src/node.h:122:6: note:   template argument deduction/substitution failed:
../ext/bson.cc:651:61: note:   cannot convert ‘BSON::BSONDeserialize’ (type ‘void(int)’) to type ‘v8::InvocationCallback {aka v8::Handle<v8::Value> (*)(const v8::Arguments&)}’
../ext/bson.cc:652:73: error: no matching function for call to ‘SetPrototypeMethod(v8::Local<v8::FunctionTemplate>&, const char [18], void (&)(int))’
../ext/bson.cc:652:73: note: candidate is:
In file included from ../ext/bson.cc:22:0:
/home/rube/.node-gyp/0.11.2/src/node.h:122:6: note: template<class target_t> void node::SetPrototypeMethod(target_t, const char*, v8::InvocationCallback)
/home/rube/.node-gyp/0.11.2/src/node.h:122:6: note:   template argument deduction/substitution failed:
../ext/bson.cc:652:73: note:   cannot convert ‘BSON::BSONDeserializeStream’ (type ‘void(int)’) to type ‘v8::InvocationCallback {aka v8::Handle<v8::Value> (*)(const v8::Arguments&)}’
../ext/bson.cc: At global scope:
../ext/bson.cc:660:1: error: ‘FunctionCallbackInfo’ in namespace ‘v8’ does not name a type
../ext/bson.cc:660:1: error: ISO C++ forbids declaration of ‘parameter’ with no type [-fpermissive]
../ext/bson.cc:660:1: error: expected ‘,’ or ‘...’ before ‘<’ token
../ext/bson.cc: In static member function ‘static void BSON::New(int)’:
../ext/bson.cc:665:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:723:5: error: return-statement with a value, in function returning 'void' [-fpermissive]
../ext/bson.cc: At global scope:
../ext/bson.cc:742:1: error: ‘FunctionCallbackInfo’ in namespace ‘v8’ does not name a type
../ext/bson.cc:742:1: error: ISO C++ forbids declaration of ‘parameter’ with no type [-fpermissive]
../ext/bson.cc:742:1: error: expected ‘,’ or ‘...’ before ‘<’ token
../ext/bson.cc: In static member function ‘static void BSON::BSONDeserialize(int)’:
../ext/bson.cc:747:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:754:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:763:22: error: ‘args’ was not declared in this scope
../ext/bson.cc:787:4: error: return-statement with a value, in function returning 'void' [-fpermissive]
../ext/bson.cc:815:4: error: return-statement with a value, in function returning 'void' [-fpermissive]
../ext/bson.cc: At global scope:
../ext/bson.cc:846:1: error: ‘FunctionCallbackInfo’ in namespace ‘v8’ does not name a type
../ext/bson.cc:846:1: error: ISO C++ forbids declaration of ‘parameter’ with no type [-fpermissive]
../ext/bson.cc:846:1: error: expected ‘,’ or ‘...’ before ‘<’ token
../ext/bson.cc: In static member function ‘static void BSON::BSONSerialize(int)’:
../ext/bson.cc:850:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:851:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:852:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:853:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:854:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:857:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:860:40: error: ‘args’ was not declared in this scope
../ext/bson.cc:897:3: error: return-statement with a value, in function returning 'void' [-fpermissive]
../ext/bson.cc:903:3: error: return-statement with a value, in function returning 'void' [-fpermissive]
../ext/bson.cc: At global scope:
../ext/bson.cc:907:1: error: ‘FunctionCallbackInfo’ in namespace ‘v8’ does not name a type
../ext/bson.cc:907:1: error: ISO C++ forbids declaration of ‘parameter’ with no type [-fpermissive]
../ext/bson.cc:907:1: error: expected ‘,’ or ‘...’ before ‘<’ token
../ext/bson.cc: In static member function ‘static void BSON::CalculateObjectSize(int)’:
../ext/bson.cc:911:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:912:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:913:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:916:40: error: ‘args’ was not declared in this scope
../ext/bson.cc:922:2: error: return-statement with a value, in function returning 'void' [-fpermissive]
../ext/bson.cc: At global scope:
../ext/bson.cc:925:1: error: ‘FunctionCallbackInfo’ in namespace ‘v8’ does not name a type
../ext/bson.cc:925:1: error: ISO C++ forbids declaration of ‘parameter’ with no type [-fpermissive]
../ext/bson.cc:925:1: error: expected ‘,’ or ‘...’ before ‘<’ token
../ext/bson.cc: In static member function ‘static void BSON::SerializeWithBufferAndIndex(int)’:
../ext/bson.cc:931:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:932:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:933:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:940:41: error: ‘args’ was not declared in this scope
../ext/bson.cc:963:2: error: ‘args’ was not declared in this scope
../ext/bson.cc:963:2: error: return-statement with a value, in function returning 'void' [-fpermissive]
../ext/bson.cc: At global scope:
../ext/bson.cc:966:1: error: ‘FunctionCallbackInfo’ in namespace ‘v8’ does not name a type
../ext/bson.cc:966:1: error: ISO C++ forbids declaration of ‘parameter’ with no type [-fpermissive]
../ext/bson.cc:966:1: error: expected ‘,’ or ‘...’ before ‘<’ token
../ext/bson.cc: In static member function ‘static void BSON::BSONDeserializeStream(int)’:
../ext/bson.cc:971:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:974:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:984:5: error: ‘args’ was not declared in this scope
../ext/bson.cc:987:22: error: ‘args’ was not declared in this scope
../ext/bson.cc:1035:2: error: return-statement with a value, in function returning 'void' [-fpermissive]
In file included from ../ext/bson.cc:14:0:
/home/rube/.node-gyp/0.11.2/deps/v8/include/v8.h: In instantiation of ‘v8::Local<T>::Local(S*) [with S = node::Buffer; T = v8::Object]’:
../ext/nan.h:416:40:   required from here
/home/rube/.node-gyp/0.11.2/deps/v8/include/v8.h:405:22: error: no matching function for call to ‘v8::Handle<v8::Object>::Handle(node::Buffer*&)’
/home/rube/.node-gyp/0.11.2/deps/v8/include/v8.h:405:22: note: candidates are:
/home/rube/.node-gyp/0.11.2/deps/v8/include/v8.h:266:22: note: template<class S> v8::Handle::Handle(v8::Handle<S>)
/home/rube/.node-gyp/0.11.2/deps/v8/include/v8.h:266:22: note:   template argument deduction/substitution failed:
/home/rube/.node-gyp/0.11.2/deps/v8/include/v8.h:405:22: note:   mismatched types ‘v8::Handle<T>’ and ‘node::Buffer*’
/home/rube/.node-gyp/0.11.2/deps/v8/include/v8.h:253:3: note: v8::Handle<T>::Handle(T*) [with T = v8::Object]
/home/rube/.node-gyp/0.11.2/deps/v8/include/v8.h:253:3: note:   no known conversion for argument 1 from ‘node::Buffer*’ to ‘v8::Object*’
/home/rube/.node-gyp/0.11.2/deps/v8/include/v8.h:247:3: note: v8::Handle<T>::Handle() [with T = v8::Object]
/home/rube/.node-gyp/0.11.2/deps/v8/include/v8.h:247:3: note:   candidate expects 0 arguments, 1 provided
/home/rube/.node-gyp/0.11.2/deps/v8/include/v8.h:242:26: note: v8::Handle<v8::Object>::Handle(const v8::Handle<v8::Object>&)
/home/rube/.node-gyp/0.11.2/deps/v8/include/v8.h:242:26: note:   no known conversion for argument 1 from ‘node::Buffer*’ to ‘const v8::Handle<v8::Object>&’
make: *** [Release/obj.target/bson/ext/bson.o] Error 1
gyp ERR! build error 
gyp ERR! stack Error: `make` failed with exit code: 2
gyp ERR! stack     at ChildProcess.onExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:267:23)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:100:17)
gyp ERR! stack     at Process.ChildProcess._handle.onexit (child_process.js:789:12)
gyp ERR! System Linux 3.8.0-32-generic
gyp ERR! command "node" "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /home/rube/node_modules/mongoose/node_modules/mongodb/node_modules/bson
gyp ERR! node -v v0.11.2
gyp ERR! node-gyp -v v0.9.5
gyp ERR! not ok 
